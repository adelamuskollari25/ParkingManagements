<div class="container">

  <h2>Entry Ticket</h2>

  <p class="error" *ngIf="error">{{ error }}</p>
  <p class="success" *ngIf="success">Ticket created successfully!</p>

  <form (ngSubmit)="createTicket()">

    <!-- LOT -->
    <label>
      Parking Lot
      <select [(ngModel)]="selectedLotId" name="lot" (change)="loadFreeSpots()">
        <option *ngFor="let lot of lots" [value]="lot.id">
          {{ lot.name }}
        </option>
      </select>
    </label>

    <!-- SPOT -->
    <label>
      Free Spot
      <select [(ngModel)]="selectedSpotId" name="spot">
        <option value="">Select a free spot</option>
        <option *ngFor="let spot of freeSpots" [value]="spot.id">
          {{ spot.spotCode }}
        </option>
      </select>
    </label>

    <!-- PLATE -->
    <label>
      Plate Number
      <input
        type="text"
        [(ngModel)]="plate"
        name="plate"
        placeholder="AA123BB"
      />
    </label>

    <!-- VEHICLE TYPE -->
    <label>
      Vehicle Type
      <select [(ngModel)]="vehicleType" name="vehicleType">
        <option [ngValue]="VehicleType.Car">Car</option>
        <option [ngValue]="VehicleType.Van">Van</option>
        <option [ngValue]="VehicleType.Motorcycle">Motorcycle</option>
      </select>
    </label>

    <!-- COLOR -->
    <label>
      Color (optional)
      <input
        type="text"
        [(ngModel)]="color"
        name="color"
      />
    </label>

    <button type="submit" [disabled]="loading">
      {{ loading ? 'Creating...' : 'Create Ticket' }}
    </button>

  </form>

</div>
