<div class="container">

  <h2>Parking Spots</h2>

  <!-- FILTERS -->
  <div class="filters">
    <label>
      Status:
      <select [(ngModel)]="statusFilter" (change)="applyFilters()">
        <option [ngValue]="'ALL'">All</option>
        <option [ngValue]="SpotStatus.Free">Free</option>
        <option [ngValue]="SpotStatus.Occupied">Occupied</option>
        <option [ngValue]="SpotStatus.Unavailable">Unavailable</option>
      </select>
    </label>

    <label>
      Type:
      <select [(ngModel)]="typeFilter" (change)="applyFilters()">
        <option [ngValue]="'ALL'">All</option>
        <option [ngValue]="SpotType.Regular">Regular</option>
        <option [ngValue]="SpotType.EV">EV</option>
        <option [ngValue]="SpotType.Disabled">Disabled</option>
      </select>
    </label>
  </div>

  <!-- LOADING -->
  <p *ngIf="loading">Loading spots...</p>

  <!-- ERROR -->
  <p class="error" *ngIf="error">{{ error }}</p>

  <!-- GRID -->
  <div class="spots-grid" *ngIf="!loading && !error">
    <div class="spot-card" *ngFor="let spot of filteredSpots">

      <h3>{{ spot.spotCode }}</h3>

      <p><strong>Type:</strong> {{ getTypeLabel(spot.type) }}</p>
      <p><strong>Status:</strong> {{ getStatusLabel(spot.status) }}</p>

      <button
        *ngIf="spot.status !== SpotStatus.Occupied"
        (click)="toggleUnavailable(spot)">
        {{ spot.status === SpotStatus.Unavailable ? 'Mark Free' : 'Mark Unavailable' }}
      </button>

    </div>
  </div>

</div>
