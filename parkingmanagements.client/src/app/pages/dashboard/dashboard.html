<div class="container">

  <h1 class="text-center">PARKING MANAGEMENT DASHBOARD</h1>

  <!-- TOP INFO -->
  <div class="info mt-2">
    <h4><mat-icon>{{ icon }}</mat-icon> {{ greeting }}</h4>
    <h4 class="text-muted">Today: {{ today | date: 'MMMM d, y' }}</h4>
  </div>

  <!-- KPI GRID -->
  <div class="grid grid-auto mt-3">

    <div class="card card--free" [routerLink]="['/dashboard/spots', selectedLot?.id]">
      <h4 class="text-center">Free Spots</h4>
      <p class="text-center">{{ freeSpots }}</p>
    </div>

    <div class="card card--occupied" [routerLink]="['/dashboard/spots', selectedLot?.id]">
      <h4 class="text-center">Occupied Spots</h4>
      <p class="text-center">{{ occupiedSpots }}</p>
    </div>

    <div class="card card--unavailable" [routerLink]="['/dashboard/spots', selectedLot?.id]">
      <h4 class="text-center">Unavailable</h4>
      <p class="text-center">{{ unavailableSpots }}</p>
    </div>

    <div class="card" routerLink="/dashboard/ticket">
      <h4 class="text-center">Open Tickets</h4>
      <p class="text-center">{{ openTickets }}</p>
    </div>

    <div class="card" routerLink="/dashboard/financial-report">
      <h4 class="text-center">Revenue Today</h4>
      <p class="text-center">{{ revenueToday | number:'1.2-2' }} â‚¬</p>
    </div>

    <div class="card">
      <h4 class="text-center">Total Spots</h4>
      <p class="text-center">{{ totalSpots }}</p>
    </div>

  </div>

  <!-- PARKING OVERVIEW -->
  <h3 class="mt-3">Parking Spots Overview</h3>

  <div class="grid grid-auto mt-2">
    <div
      class="card"
      *ngFor="let spot of spotsInfo"
    >
      <h4>{{ spot.spotCode }}</h4>

      <span
        class="badge"
        [ngClass]="{
          'badge--green': spot.status === 0,
          'badge--red': spot.status === 1,
          'badge--orange': spot.status === 2
        }"
      >
        {{ spot.status === 0 ? 'FREE' : spot.status === 1 ? 'OCCUPIED' : 'UNAVAILABLE' }}
      </span>
    </div>
  </div>

</div>
